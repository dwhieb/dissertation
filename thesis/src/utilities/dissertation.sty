\ProvidesPackage{utilities/dissertation}

% FORMATTING

% Bibliography
\setlength{\bibitemsep}{0.5em}

% Block Quotes
\renewcommand{\mkblockquote}[4]{\small#1#2#4#3}

% Citations
\let\citeps\parencites

% Captions
\captionsetup{
  font      = small,
  format    = hang,
  labelfont = bf,
  margin    = 5em
}

% Header & Footer (fancyhdr package)
\pagestyle{fancy}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}
\fancyhf{}
\fancyfoot[C]{\thepage}

% Indents
\newlength{\defaulthang}
\setlength{\defaulthang}{1.5em}

\newlength{\defaultindent}
\setlength{\defaultindent}{1.5em}
\setlength{\parindent}{\defaultindent}

% Index
\makeindex[
  columns = 2,
  title   = {Language Index}
]

% Links
\hypersetup{
  bookmarksopen     = true,        % start with PDF bookmarks expanded
  bookmarksnumbered = true,        % number PDF bookmarks
  citecolor         = purple,      % bibliography links
  citebordercolor   = {0.5 0 0.5}, % bibliography links underline color
  colorlinks        = true,        % use colored links instead of boxes
  final             = true,        % turn on all options
  linkbordercolor   = {1 1 1},     % color of internal link underline
  linkcolor         = cyan,        % internal links
  urlbordercolor    = {0 0 1},     % color of URL underline
  urlcolor          = blue         % URL links
}

  % underline links
  \makeatletter
  \Hy@AtBeginDocument{
    \def\@pdfborder{0 0 1}         % Overrides border definition set with colorlinks=true
    \def\@pdfborderstyle{/S/U/W 1} % Overrides border style set with colorlinks=true
  }
  \makeatother

% List of Tables
\setlength{\cftbeforetabskip}{0.5em}
\renewcommand{\cfttabnumwidth}{4.3em} % originally: 2.3em
\renewcommand{\cfttabaftersnumb}{\hspace*{-2em}}

% Quote
\let\origbegquote\quote
\let\origendquote\endquote
\renewenvironment{quote}
{\origbegquote\singlespacing}
{\origendquote\doublespacing}

% Quotation
\let\origbegquotation\quotation
\let\origendquotation\endquotation
\renewenvironment{quotation}
{\origbegquotation\singlespacing}
{\origendquotation\doublespacing}

% Section (unnumbered)
\titleformat
{name=\section, numberless}
{ % formatting
  \centering
  \Large
  \scshape
}
{}    % label
{0em} % separation
{}    % code before
[]    % code after

\titlespacing*
{name=\section, numberless}
{0em} % left margin
{0em} % vertical space before heading
{0em} % vertical space after heading
[0em] % right margin

% Subsection (unnumbered)
\titleformat
{name=\subsection, numberless}
{ % formatting
  \large
  \scshape
}
{}    % label
{0em} % separation
{}    % code before
[]    % code after

\titlespacing*
{name=\subsection, numberless}
{0em} % left margin
{0em} % vertical space before heading
{0em} % vertical space after heading
[0em] % right margin

% Text (fontspec, setspace packages)
\doublespacing
\setmainfont{Linux Libertine}
\setmonofont[Scale = MatchLowercase]{Linux Libertine Mono}

% REFERENCE COMMANDS

\newcommand{\chref}[1]{\hyperref[#1]{Chapter~\ref*{#1}}} % Chapters: ch:introduction
\newcommand{\secref}[1]{§\ref{#1}}                       % Sections: sec:1.2
\newcommand{\tabref}[1]{\hyperref[#1]{Table~\ref*{#1}}}  % Tables:   tab:table-name

% COMMANDS

% \dfn
%
% For definitions in prose.
%
% Example:
%
% A \dfn{morpheme} is a minimal meaningful part of a word.
\DeclareTextFontCommand{\dfn}{\itshape}

% \gl
%
% For glosses of grammatical morphemes. NB: Gloss should be in lowercase in the source code.
%
% Example:
%
% Mithun (2008) glosses this as \gl{agt}.
\DeclareTextFontCommand{\gl}{\scshape}

% \inlinetitle
%
% Use to style titles of books, journals, etc. in prose
%
% Example:
%
% In her survey \inlinetitle{The languages of Native North America}, Mithun says\ldots
\DeclareTextFontCommand{\inlinetitle}{\itshape}

% \tln
%
% For inline translations.
%
% Example:
%
% The Chitimacha word \txn{guxt-} \tln{eat} is an example of a verb.
\newcommand{\tln}[1]{\enquote*{#1}}

% \txn
%
% For inline mentions of language, i.e. inline examples. \txn is short for 'transcription', since every example / mention is a transcription of some piece of language. NB: This command substitutes non-breaking hyphens for regular hyphens
%
% Example:
%
% The English Participle \txn{-ing} is, obviously, specific to English.
%
% \newcommand{\txn}[1]{\StrSubstitute{\textit{#1}}{-}{‑}}
\newcommand{\txn}[1]{\textit{\StrSubstitute{#1}{-}{‑}}}
